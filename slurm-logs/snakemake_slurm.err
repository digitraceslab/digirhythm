Assuming unrestricted shared filesystem usage.
Building DAG of jobs...
Your conda installation is not configured to use strict channel priorities. This is however crucial for having robust and correct environments (for details, see https://conda-forge.org/docs/user/tipsandtricks.html). Please consider to configure strict priorities by executing 'conda config --set channel_priority strict'.
Using shell: /usr/bin/bash
Provided cores: 2
Rules claiming more threads will be scaled down.
Job stats:
job               count
--------------  -------
all                   1
clean_features        1
latent                1
total                 3

Select jobs to execute...
Execute 1 jobs...

[Mon Feb 17 16:36:26 2025]
localrule clean_features:
    input: data/processed/tesserae/all_features.csv
    output: data/processed/tesserae/all_features_clean.csv
    jobid: 2
    reason: Code has changed since last execution
    wildcards: study=tesserae
    resources: tmpdir=/tmp

Activating conda environment: .snakemake/conda/e283964fde1f0525377b0f130dc3d5fd_
Activating conda environment: .snakemake/conda/e283964fde1f0525377b0f130dc3d5fd_
2025-02-17 16:36:40,440 - INFO - All required features are present in the data.
2025-02-17 16:36:40,440 - INFO - Features identified for filling missing call data: ['call_total_duration_night', 'call_total_duration_morning', 'call_total_duration_afternoon', 'call_total_duration_evening', 'call_total_duration_allday']
2025-02-17 16:36:40,443 - INFO - Filled missing data with 0 for feature: call_total_duration_night
2025-02-17 16:36:40,445 - INFO - Filled missing data with 0 for feature: call_total_duration_morning
2025-02-17 16:36:40,447 - INFO - Filled missing data with 0 for feature: call_total_duration_afternoon
2025-02-17 16:36:40,448 - INFO - Filled missing data with 0 for feature: call_total_duration_evening
2025-02-17 16:36:40,450 - INFO - Filled missing data with 0 for feature: call_total_duration_allday
2025-02-17 16:36:40,450 - INFO - Initial data shape before filtering: (253260, 140)
2025-02-17 16:36:40,484 - INFO - Feature 'activity_night' has 84948 NaN observations
2025-02-17 16:36:40,484 - INFO - Feature 'activity_morning' has 84948 NaN observations
2025-02-17 16:36:40,484 - INFO - Feature 'activity_afternoon' has 84948 NaN observations
2025-02-17 16:36:40,484 - INFO - Feature 'activity_evening' has 84948 NaN observations
2025-02-17 16:36:40,484 - INFO - Feature 'activity_allday' has 84948 NaN observations
2025-02-17 16:36:40,484 - INFO - Feature 'call_total_duration_night' has 0 NaN observations
2025-02-17 16:36:40,484 - INFO - Feature 'call_total_duration_morning' has 0 NaN observations
2025-02-17 16:36:40,484 - INFO - Feature 'call_total_duration_afternoon' has 0 NaN observations
2025-02-17 16:36:40,484 - INFO - Feature 'call_total_duration_evening' has 0 NaN observations
2025-02-17 16:36:40,484 - INFO - Feature 'call_total_duration_allday' has 0 NaN observations
2025-02-17 16:36:40,484 - INFO - Feature 'screen_night' has 30604 NaN observations
2025-02-17 16:36:40,484 - INFO - Feature 'screen_morning' has 30604 NaN observations
2025-02-17 16:36:40,484 - INFO - Feature 'screen_afternoon' has 30604 NaN observations
2025-02-17 16:36:40,484 - INFO - Feature 'screen_evening' has 30604 NaN observations
2025-02-17 16:36:40,484 - INFO - Feature 'screen_allday' has 30604 NaN observations
2025-02-17 16:36:40,485 - INFO - Feature 'sleep_onset' has 44953 NaN observations
2025-02-17 16:36:40,485 - INFO - Feature 'sleep_offset' has 44953 NaN observations
2025-02-17 16:36:40,485 - INFO - Feature 'sleep_duration' has 44953 NaN observations
2025-02-17 16:36:40,607 - INFO - Data shape after removing NaNs based on features: (155044, 140)
2025-02-17 16:36:40,658 - INFO - Data shape after removing zero activity: (107380, 140)
2025-02-17 16:36:40,703 - INFO - Data shape after removing zero screen use: (106673, 140)
2025-02-17 16:36:40,748 - INFO - Data shape after removing negative sleep duration: (106606, 140)
2025-02-17 16:36:40,748 - INFO - Final data shape before saving to CSV: (106606, 140)
[Mon Feb 17 16:36:52 2025]
Finished job 2.
1 of 3 steps (33%) done
Select jobs to execute...
Execute 1 jobs...

[Mon Feb 17 16:36:52 2025]
localrule latent:
    input: data/processed/tesserae/all_features_clean.csv
    output: data/output/tesserae/latent.csv
    jobid: 1
    reason: Missing output files: data/output/tesserae/latent.csv; Input files updated by another job: data/processed/tesserae/all_features_clean.csv
    wildcards: study=tesserae
    resources: tmpdir=/tmp, cpus_per_task=8, mem_mb=10000, mem_mib=9537

Activating conda environment: .snakemake/conda/e283964fde1f0525377b0f130dc3d5fd_
Activating conda environment: .snakemake/conda/e283964fde1f0525377b0f130dc3d5fd_
RuleException:
CalledProcessError in file /scratch/work/luongn1/digirhythm-v2/workflow/Snakefile, line 26:
Command 'source /appl/scibuilder-mamba/aalto-rhel9/prod/software/mamba/2024-01/39cf5e1/bin/activate '/scratch/work/luongn1/digirhythm-v2/.snakemake/conda/e283964fde1f0525377b0f130dc3d5fd_'; set -euo pipefail;  python /scratch/work/luongn1/digirhythm-v2/.snakemake/scripts/tmp0700ol_q.make_latent.py' died with <Signals.SIGKILL: 9>.
[Mon Feb 17 16:38:19 2025]
Error in rule latent:
    jobid: 1
    input: data/processed/tesserae/all_features_clean.csv
    output: data/output/tesserae/latent.csv
    conda-env: /scratch/work/luongn1/digirhythm-v2/.snakemake/conda/e283964fde1f0525377b0f130dc3d5fd_

Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: .snakemake/log/2025-02-17T163621.758018.snakemake.log
WorkflowError:
At least one job did not complete successfully.
slurmstepd: error: Detected 1 oom_kill event in StepId=5704739.batch. Some of the step tasks have been OOM Killed.
